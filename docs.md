# 爬虫文档

**1-all-anime-list.json** *git:yes*

这个文件包含所有番剧的**播放链接**和**标题**。

播放链接的例子：https://www.bilibili.com/bangumi/play/ss26801

从播放链接可以提取出id（ss26801），作为本系统内番剧的id。

下一步，通过一些代码，可以分析出每个番剧所对应的**详细页面的链接**。这一步需要分别访问每一个番剧的播放链接。 

详细页面的链接会被储存到 2-detail-link.json。*git:yes*

```json
{
    "id": "ss123",
    "detailLink": ".....md11125"
}
```

之后，读取 2-detail-link.json ，通过访问每一个番剧的详细页面，我们可以获取声优列表。


## 关于缓存

缓存的劣势是占用空间大。注意，我们的硬盘相当的大，不存在空间不够用的情况。我们的问题是被git跟踪的东西太大。

缓存的优势表现在如下几个方面：
- 透明。
- 保留了原始信息。
    - 程序异常退出后，工作不会丢失。
    - 程序有bug，只需修复bug，然后再运行一次。

我们要讨论的问题，是如何缓存的优势和劣势。

缓存占用空间最大，原始信息也是最多的。缓存到任务输出是一个渐变的过程：
- 原始网页（原始信息多，占用空间多）
- 中间状态（原始信息温和，占用空间温和）
- 任务输出（原始信息最少，占用空间最小）

其中，中间状态是我们自己需要去发现的中间状态。再当前任务里，因为经过的变换越简单，出现bug的几率也越小。所以，如果一种简单的变换能够将很多冗余信息排除，那么这是一个很好的状态。例如，在提取演员列表的时候，我们使用的提取 `"actors": "XXXX"` 的过程就是一个非常简单的变换，而将XXXX部分分割、形成角色与演员的关系的过程，就是一个非常复杂的变换，出错的风险大大增加，丢失有用信息的概率也增加。

**多级缓存**

这里的多级缓存不是由于设备速率差异所形成的分级缓存。这里的多级缓存是git跟踪差异所形成的。

原始网页占用空间太大，不代表我们就不用。我们至少不用git跟踪它罢了。


